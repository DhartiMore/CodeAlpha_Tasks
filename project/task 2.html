<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Advanced Pastel Calculator</title>
<style>
    :root{
        --bg:#dcdcdc; /* LIGHT GRAY BACKGROUND */
        --panel:rgba(255,255,255,0.6);
        --btn:#e3edf7;
        --btn-hover:#d5e6ff;
        --text:#1e1e1e;
        --accent:#4a90e2;
        --accent2:#ff7b54;
        --shadow:rgba(0,0,0,0.15);
    }

    body.dark{
        --bg:#0f1117;
        --panel:rgba(255,255,255,0.05);
        --btn:#1a1f27;
        --btn-hover:#30363d;
        --text:#e6edf3;
        --accent:#00c6ff;
        --accent2:#ff9800;
        --shadow:rgba(0,0,0,0.6);
    }

    body{
        background:black;
        height:100vh;
        display:flex;
        align-items:center;
        justify-content:center;
        font-family:"Segoe UI", sans-serif;
        transition:0.4s;
        margin:0;
    }

    .calculator{
        width:380px;
        background:var(--panel);
        padding:22px;
        border-radius:22px;
        backdrop-filter:blur(14px);
        box-shadow:0 0 30px var(--shadow);
    }

    #display{
        width:100%;
        height:75px;
        font-size:32px;
        padding:1px;
        text-align:right;
        border:none;
        border-radius:14px;
        color:var(--accent2);
        background:#fff;
        box-shadow:inset 0 0 12px rgba(0,0,0,0.15);
        margin-bottom:15px;
    }

    .buttons{
        display:grid;
        grid-template-columns:repeat(4, 1fr);
        gap:12px;
    }

    button{
        padding:17px;
        border:none;
        border-radius:12px;
        font-size:20px;
        cursor:pointer;
        background:var(--btn);
        color:var(--text);
        transition:0.2s;
        box-shadow:0 4px 12px var(--shadow);
    }

    button:hover{
        background:var(--btn-hover);
        transform:translateY(-2px);
    }

    button:active, .active-key{
        transform:scale(0.90);
        background:var(--accent2) !important;
        color:#fff !important;
    }

    .op{
        color:var(--accent2);
        font-weight:bold;
        text-shadow:0 0 5px var(--accent2);
    }

    .eq{
        background:var(--accent);
        color:#fff;
        font-weight:bold;
    }

    .clear{
        background:#f56e6e;
        color:white;
    }

    .sci{
        margin-top:12px;
        display:grid;
        grid-template-columns:repeat(4, 1fr);
        gap:12px;
    }

    .theme-btn{
        margin-bottom:12px;
        padding:12px;
        width:100%;
        font-size:17px;
        background:#fff;
        box-shadow:0 3px 8px rgba(0,0,0,0.2);
    }

    .history-box{
        margin-top:15px;
        background:var(--btn);
        padding:10px;
        height:110px;
        overflow-y:auto;
        border-radius:12px;
        font-size:14px;
        color:var(--text);
        box-shadow:inset 0 0 10px rgba(0,0,0,0.15);
    }
</style>
</head>
<body>

<div class="calculator">

    <button class="theme-btn" onclick="toggleTheme()">ðŸŒˆ Toggle Theme</button>

    <input type="text" id="display" disabled>

    <div class="buttons">
        <button class="clear" data-key="Escape">C</button>
        <button data-key="Backspace">DEL</button>
        <button class="op" data-val="%">%</button>
        <button class="op" data-val="/">Ã·</button>

        <button data-val="7">7</button>
        <button data-val="8">8</button>
        <button data-val="9">9</button>
        <button class="op" data-val="*">Ã—</button>

        <button data-val="4">4</button>
        <button data-val="5">5</button>
        <button data-val="6">6</button>
        <button class="op" data-val="-">âˆ’</button>

        <button data-val="1">1</button>
        <button data-val="2">2</button>
        <button data-val="3">3</button>
        <button class="op" data-val="+">+</button>

        <button data-val="0">0</button>
        <button data-val=".">.</button>
        <button class="eq" data-key="Enter">=</button>
    </div>

    <div class="sci">
        <button data-fn="sin">sin</button>
        <button data-fn="cos">cos</button>
        <button data-fn="tan">tan</button>
        <button data-fn="sqrt">âˆš</button>

        <button data-val="^">^</button>
        <button data-fn="log">log</button>
        <button data-val="Math.PI">Ï€</button>
        <button data-val="Math.E">e</button>
    </div>

    <h3 style="color:var(--text); margin-top:12px;">History</h3>
    <div class="history-box" id="history"></div>
</div>

<script>
    const display = document.getElementById("display");
    const historyBox = document.getElementById("history");

    function appendValue(val){ display.value += val; }
    function clearDisplay(){ display.value = ""; }
    function delChar(){ display.value = display.value.slice(0, -1); }

    function scientific(fn){
        let v = display.value;
        if(!v) return;

        let result = {
            sin: Math.sin(v * Math.PI/180),
            cos: Math.cos(v * Math.PI/180),
            tan: Math.tan(v * Math.PI/180),
            sqrt: Math.sqrt(v),
            log: Math.log10(v)
        }[fn];

        display.value = result;
        saveHistory(`${fn}(${v}) = ${result}`);
    }

    function calculatePower(expr){
        if(expr.includes("^")){
            let [a, b] = expr.split("^");
            return Math.pow(Number(a), Number(b));
        }
        return eval(expr);
    }

    function calculate(){
        try{
            let expr = display.value;
            let result = calculatePower(expr);
            display.value = result;
            saveHistory(expr + " = " + result);
        } catch{
            display.value = "Error";
        }
    }

    function saveHistory(item){
        let p = document.createElement("p");
        p.innerText = item;
        historyBox.appendChild(p);
    }

    document.querySelectorAll("button").forEach(btn=>{
        btn.addEventListener("click",()=>{
            let val=btn.dataset.val, key=btn.dataset.key, fn=btn.dataset.fn;
            if(val) appendValue(val);
            else if(fn) scientific(fn);
            else if(key==="Escape") clearDisplay();
            else if(key==="Backspace") delChar();
            else if(key==="Enter") calculate();
        });
    });

    document.addEventListener("keydown",(e)=>{
        let key=e.key;
        let btn=[...document.querySelectorAll("button")].find(b=>b.dataset.key===key||b.dataset.val===key);
        if(btn){
            btn.classList.add("active-key");
            setTimeout(()=>btn.classList.remove("active-key"),150);
        }
        if(!isNaN(key) || "+-*/.%".includes(key)) appendValue(key);
        else if(key==="Enter") calculate();
        else if(key==="Backspace") delChar();
        else if(key==="Escape") clearDisplay();
    });

    function toggleTheme(){ document.body.classList.toggle("dark"); }
</script>

</body>
</html>
